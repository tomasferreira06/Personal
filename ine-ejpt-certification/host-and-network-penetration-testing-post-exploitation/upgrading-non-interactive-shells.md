# Upgrading Non-Interactive Shells

## Practice Demo

Exploit the target.

We will exploit the <mark style="color:red;">samba\_is\_known\_pipename</mark>.

We get a non-interactive shell in the target. We can see that by not having a prompt.

### Upgrading our shell

Start by seeing what shells are installed in the target system.

* <mark style="color:yellow;">cat /etc/shells</mark>

According to what shells are installed we can run

* /bin/bash -i
* /bin/sh -i&#x20;

To get interactive shells on the target.

### Shell with Python

If python is installed we can get a shell with it.

#### Checking if Python is installed

* <mark style="color:yellow;">python --version</mark>

#### Obtain interactive session with python

* <mark style="color:yellow;">python -c 'import pty; pty.spawn("/bin/bash")'</mark>

### Shell with Perl

If perl is installed we can get a shell with it.

#### Checking if Perl is installed

* perl -help

#### Obtain interactive shell with perl

* <mark style="color:yellow;">perl -e 'exec "/bin/bash";'</mark>
* <mark style="color:yellow;">perl: exec "/bin/bash";</mark>

### Ruby shell

* <mark style="color:yellow;">ruby: exec "/bin/bash"</mark>

### After getting an interactive shell

#### Display environment variables

* <mark style="color:yellow;">env</mark>

If the path is not specified run

* <mark style="color:yellow;">export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</mark>

We can also run

* <mark style="color:yellow;">export TERM=xterm</mark>
* <mark style="color:yellow;">export SHELL=bash</mark>
