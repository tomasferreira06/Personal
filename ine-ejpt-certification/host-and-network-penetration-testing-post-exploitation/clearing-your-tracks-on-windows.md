# Clearing Your Tracks On Windows

The exploitation and post-exploitation phases of a penetration test involves actively engaging with target systems and the data that is stored on these systems.

As a result, you may be required to clear/undo any changed you have made to the target systems you have compromised based on the guidelines specified in the rules of engagement.

If you have transferred any files to the target systems you have compromised, keep track of where thay have been saved so that you can remove them when done.

A good practice is to store all your scripts, exploits and binaries in the <mark style="color:red;">C:\Temp directory in Windows</mark> and the <mark style="color:red;">/tmp directory on Linux</mark>.

It is also important to consider the exploitation framework you are using, an example of this is MSG, which is notorious for generating and storing artifacts on the target system when using exploit or post modules.

Some well designed MSF modules provide you with instructions and resource scripts that provide you with information regarding where the artifacts are stored and how they can be removed.

In the context of Windows, a typical post-exploitation technique pertinent to clearing your tracks is to delete the Windows Event Log. This is something that should be avoided during a penetration test as the Windows Event Log stores a lot of data that is important to the client you are performing the pentest for.

## Practice Demo

We will the BadBlue module to exploit the target system.

When using a module we can run:

* <mark style="color:yellow;">show advanced</mark>

Where we can see if the current module is able to automatically delete certain artifacts that it creates, and a lot of other important information.

## ALWAYS STORE FILES/EXPLOITS IN THE TEMP DIRECTORY

For example, when running the module:

* <mark style="color:yellow;">exploit/windows/local/persistence\_service</mark>

It generates a <mark style="color:red;">clean up Meterpreter resource script (RS)</mark>, so we can clean any artifacts left by the module.

In meterpreter session, run:

* <mark style="color:yellow;">resource 'pathtoRS'</mark>

### Cleaning entire Windows Event Log

In Meterpreter run:

* <mark style="color:yellow;">clearev</mark>
