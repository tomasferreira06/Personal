# Linux Kernel Exploits

* Kernel exploits on Linux will typically target vulnerabilities in the Linux kernel to execute arbitrary code in order to run privileged system commands or to obtain a system shell.

Privilege escalation on Linux systems will typically follow the following methodology:

* Identifying kernel vulnerabilities
* Downloading, compiling and transferring kernel exploits onto the target system.

## Tools & Environment

* <mark style="color:red;">Linux-Exploit-Suggester</mark>: This tool is designed to assist in detecting security deficiencies for given Linux kernel/Linux-based machine. It assesses (using heuristic methods9 the exposure of the given kernel on every publicly know Linux kernel exploit.
  * <mark style="color:blue;">Github</mark>: https://github.com/mzet-/linux-exploit-suggester

## Practice Demo

We already have initial access with a meterpreter session.

We have access to account "www-data", a service account not privileged.

### Linux-Exploit-Suggester

{% embed url="https://github.com/mzet-/linux-exploit-suggester" %}

After downloading the script above, in the target go to the Temp directory and upload the script:

* <mark style="color:yellow;">upload script</mark>

Give execute permissions

* <mark style="color:yellow;">chmod +x nameofscript</mark>

Execute the script

* <mark style="color:yellow;">./les.sh</mark>

The script enumerates the kernel for versions and exploits that is is vulnerable to.

In this case we will the exploit <mark style="color:red;">Dirty Cow 2</mark>.

To compile "<mark style="color:red;">C</mark>" code in Linux we need the GCC compiler:

* <mark style="color:yellow;">sudo apt-get install gcc</mark>

To compile the "exploit.c" file run:

* <mark style="color:yellow;">gcc -pthread 'exploitfile.c' -o 'nametogiveit' -lcrypt</mark>

Upload the executable to the target

Give it execute permissions

<mark style="color:purple;">NOTE:</mark> If the compiled binary doesnt run on the target correctly, you have to compile it in the target machine.
